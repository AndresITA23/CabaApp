{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\crist\\\\OneDrive\\\\Documentos\\\\GitHub\\\\CabaApp\\\\src\\\\screens\\\\AddPlace\\\\UploadImagesForm.tsx\",\n  _this = this;\nimport { View, Button, ButtonText } from \"@gluestack-ui/themed\";\nimport React from \"react\";\nimport * as ImagePicker from 'expo-image-picker';\nimport { useState } from 'react';\nimport { getStorage, ref, uploadBytes } from 'firebase/storage';\nimport { v4 as uuid } from 'uuid';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar UploadImagesForm = function UploadImagesForm(props) {\n  var formik = props.formik;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    image = _useState2[0],\n    setImage = _useState2[1];\n  var pickImage = function () {\n    var _ref = _asyncToGenerator(function* () {\n      var result = yield ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.All,\n        allowsEditing: true,\n        aspect: [4, 3],\n        quality: 1\n      });\n      console.log(result);\n      if (!result.canceled) {\n        var uri = result.assets[0].uri;\n        uploadImage(uri);\n      }\n    });\n    return function pickImage() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var uploadImage = function () {\n    var _ref2 = _asyncToGenerator(function* (uri) {\n      var response = yield fetch(uri);\n      var blob = yield response.blob();\n      var storage = getStorage();\n      var storageRef = ref(storage, `restaurants/${uuid()}`);\n      uploadBytes(storageRef, blob).then(function (snapshot) {\n        console.log(snapshot);\n      });\n    });\n    return function uploadImage(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return _jsxDEV(View, {\n    children: _jsxDEV(Button, {\n      action: \"primary\",\n      variant: \"solid\",\n      size: \"lg\",\n      isDisabled: false,\n      onPress: pickImage,\n      children: _jsxDEV(ButtonText, {\n        children: \"AddImage\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 7\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, _this);\n};\nexport default UploadImagesForm;","map":{"version":3,"names":["View","Button","ButtonText","React","ImagePicker","useState","getStorage","ref","uploadBytes","v4","uuid","jsxDEV","_jsxDEV","UploadImagesForm","props","formik","_useState","_useState2","_slicedToArray","image","setImage","pickImage","_ref","_asyncToGenerator","result","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","quality","console","log","canceled","uri","assets","uploadImage","apply","arguments","_ref2","response","fetch","blob","storage","storageRef","then","snapshot","_x","children","action","variant","size","isDisabled","onPress","fileName","_jsxFileName","lineNumber","columnNumber","_this"],"sources":["C:/Users/crist/OneDrive/Documentos/GitHub/CabaApp/src/screens/AddPlace/UploadImagesForm.tsx"],"sourcesContent":["import { View, Text, Button, ButtonText } from \"@gluestack-ui/themed\";\r\nimport React from \"react\";\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport { useState } from 'react';\r\nimport { getStorage, ref, uploadBytes, getDownloadURL} from 'firebase/storage';\r\nimport { v4 as uuid } from 'uuid';\r\n\r\nconst UploadImagesForm = (props) => {\r\n  const { formik } = props;\r\n  const [image, setImage] = useState(null);\r\n\r\n  \r\n  const pickImage = async () => {\r\n    \r\n    // No permissions request is necessary for launching the image library\r\n    let result = await ImagePicker.launchImageLibraryAsync({\r\n      mediaTypes: ImagePicker.MediaTypeOptions.All,\r\n      allowsEditing: true,\r\n      aspect: [4, 3],\r\n      quality: 1,\r\n    });\r\n\r\n    console.log(result);\r\n\r\n    if (!result.canceled) {\r\n      const uri = result.assets[0].uri; \r\n      uploadImage(uri);\r\n    }\r\n  };\r\n\r\n  const uploadImage = async (uri) => {\r\n    const response = await fetch(uri);\r\n    const blob = await response.blob();\r\n\r\n    const storage = getStorage();\r\n    const storageRef = ref(storage, `restaurants/${uuid()}`);\r\n\r\n    uploadBytes(storageRef, blob).then((snapshot) => {\r\n        console.log(snapshot)\r\n    });\r\n  };\r\n\r\n  return (\r\n    <View>\r\n      <Button\r\n        action={\"primary\"}\r\n        variant={\"solid\"}\r\n        size={\"lg\"}\r\n        isDisabled={false}\r\n        onPress={pickImage}\r\n      >\r\n      <ButtonText>AddImage</ButtonText>\r\n      </Button>\r\n    </View>\r\n  );\r\n};\r\nexport default UploadImagesForm;\r\n"],"mappings":";;;;AAAA,SAASA,IAAI,EAAQC,MAAM,EAAEC,UAAU,QAAQ,sBAAsB;AACrE,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAO,KAAKC,WAAW,MAAM,mBAAmB;AAChD,SAASC,QAAQ,QAAQ,OAAO;AAChC,SAASC,UAAU,EAAEC,GAAG,EAAEC,WAAW,QAAuB,kBAAkB;AAC9E,SAASC,EAAE,IAAIC,IAAI,QAAQ,MAAM;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElC,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAIC,KAAK,EAAK;EAClC,IAAQC,MAAM,GAAKD,KAAK,CAAhBC,MAAM;EACd,IAAAC,SAAA,GAA0BX,QAAQ,CAAC,IAAI,CAAC;IAAAY,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAjCG,KAAK,GAAAF,UAAA;IAAEG,QAAQ,GAAAH,UAAA;EAGtB,IAAMI,SAAS;IAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,aAAY;MAG5B,IAAIC,MAAM,SAASpB,WAAW,CAACqB,uBAAuB,CAAC;QACrDC,UAAU,EAAEtB,WAAW,CAACuB,gBAAgB,CAACC,GAAG;QAC5CC,aAAa,EAAE,IAAI;QACnBC,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACdC,OAAO,EAAE;MACX,CAAC,CAAC;MAEFC,OAAO,CAACC,GAAG,CAACT,MAAM,CAAC;MAEnB,IAAI,CAACA,MAAM,CAACU,QAAQ,EAAE;QACpB,IAAMC,GAAG,GAAGX,MAAM,CAACY,MAAM,CAAC,CAAC,CAAC,CAACD,GAAG;QAChCE,WAAW,CAACF,GAAG,CAAC;MAClB;IACF,CAAC;IAAA,gBAhBKd,SAASA,CAAA;MAAA,OAAAC,IAAA,CAAAgB,KAAA,OAAAC,SAAA;IAAA;EAAA,GAgBd;EAED,IAAMF,WAAW;IAAA,IAAAG,KAAA,GAAAjB,iBAAA,CAAG,WAAOY,GAAG,EAAK;MACjC,IAAMM,QAAQ,SAASC,KAAK,CAACP,GAAG,CAAC;MACjC,IAAMQ,IAAI,SAASF,QAAQ,CAACE,IAAI,CAAC,CAAC;MAElC,IAAMC,OAAO,GAAGtC,UAAU,CAAC,CAAC;MAC5B,IAAMuC,UAAU,GAAGtC,GAAG,CAACqC,OAAO,EAAG,eAAclC,IAAI,CAAC,CAAE,EAAC,CAAC;MAExDF,WAAW,CAACqC,UAAU,EAAEF,IAAI,CAAC,CAACG,IAAI,CAAC,UAACC,QAAQ,EAAK;QAC7Cf,OAAO,CAACC,GAAG,CAACc,QAAQ,CAAC;MACzB,CAAC,CAAC;IACJ,CAAC;IAAA,gBAVKV,WAAWA,CAAAW,EAAA;MAAA,OAAAR,KAAA,CAAAF,KAAA,OAAAC,SAAA;IAAA;EAAA,GAUhB;EAED,OACE3B,OAAA,CAACZ,IAAI;IAAAiD,QAAA,EACHrC,OAAA,CAACX,MAAM;MACLiD,MAAM,EAAE,SAAU;MAClBC,OAAO,EAAE,OAAQ;MACjBC,IAAI,EAAE,IAAK;MACXC,UAAU,EAAE,KAAM;MAClBC,OAAO,EAAEjC,SAAU;MAAA4B,QAAA,EAErBrC,OAAA,CAACV,UAAU;QAAA+C,QAAA,EAAC;MAAQ;QAAAM,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,GAAAC,KAAY;IAAC;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,GAAAC,KACzB;EAAC;IAAAJ,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,GAAAC,KACL,CAAC;AAEX,CAAC;AACD,eAAe9C,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}